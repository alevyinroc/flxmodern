{{ define "main" }}
  <h1>{{ .Site.Title }}</h1>

  {{ $paginator := .Paginate (where .Site.RegularPages "Type" "posts" ) }}
  <ul class="post-list">
    {{ $root := . }}
    {{ $root.Scratch.Set "lastDate" "" }}
    {{ range $paginator.Pages }}
      {{ $date := .Date.Format "Jan 2, 2006" }}
      {{ if ne ($root.Scratch.Get "lastDate") $date }}
        <li class="post-date"><strong>{{ $date }}</strong></li>
        {{ $root.Scratch.Set "lastDate" $date }}
      {{ end }}
      <li class="post-item">
        <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
        <p class="excerpt">{{ .Summary }}</p>
      </li>
    {{ end }}
  </ul>

  <nav class="pagination">
    {{ if $paginator.HasPrev }}<a href="{{ $paginator.Prev.URL }}">Previous</a>{{ end }}
    {{ if $paginator.HasNext }}<a href="{{ $paginator.Next.URL }}">Next</a>{{ end }}
  </nav>
{{ end }}
